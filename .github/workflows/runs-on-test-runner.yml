name: RunsOn Test Runner

# This workflow is triggered by the integration test to verify RunsOn runners work.
# It uses workflow_dispatch with a test_id for correlation with the test run.

on:
  workflow_dispatch:
    inputs:
      test_id:
        description: "Test ID for correlation with integration test"
        required: true
        type: string

jobs:
  test-runner:
    name: Test RunsOn Runner
    runs-on: runs-on=${{ github.run_id }}/runner=2cpu-linux-x64
    steps:
      - name: Verify RunsOn Runner
        run: |
          echo "========================================"
          echo "RunsOn Integration Test"
          echo "========================================"
          echo "Test ID: ${{ github.event.inputs.test_id }}"
          echo "Runner Name: $RUNNER_NAME"
          echo "Runner OS: $RUNNER_OS"
          echo "Runner Arch: $RUNNER_ARCH"
          echo "========================================"

          # Verify this is a RunsOn runner by checking for expected environment
          if [[ -n "$RUNNER_NAME" ]]; then
            echo "Runner verification: PASSED"
          else
            echo "Runner verification: FAILED - RUNNER_NAME not set"
            exit 1
          fi
